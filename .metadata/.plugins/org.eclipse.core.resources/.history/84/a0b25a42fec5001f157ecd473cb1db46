<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	>

	<p:panel id="feed" header="Posty">
		<div class="posts">
		    <ui:repeat value="#{posts}" var="post">
		    	<div class="post">
	                <h:form class="post__header">
	                    <div class="post__profile">
	                        <p:commandLink
	                                action="#{feed.profile(post.user)}"
	                                class="post__avatar"
	                        >
	                            <h:graphicImage library="template" name="icons/default-user.png" alt="User picture"/>
	                        </p:commandLink>
	                        <a
	                                href=""
	                                class="post__user"
	                        >#{post.user.firstName} #{post.user.lastName}</a
	                        >
	                    </div>
	
					<!-- edit post, render if i am creator or moderator -->
					<p:outputPanel rendered="#{post.user.id == remoteClient.details.id || remoteClient.isInRole('moderator')}">
						<p:commandLink action="#{feed.editPost(post)}" styleClass="post__more-options">
							<h:graphicImage width="24" library="template" name="icons/more.svg" alt="Więcej"/>
	                    </p:commandLink>
                    </p:outputPanel>
	
	                    
	                </h:form>
	                
	                <div class="post__content">
	                    <div class="post__medias">
	                        <p:graphicImage styleClass="post__media" value="/uploads/#{post.id}.jpg" alt="Zdjęcie" style="width: 100%;" />
	                    </div>
	                </div>
	
	                <div class="post__footer">
	                    
	
	                    <div class="post__infos">
	                        
	
	                        <div class="post__description">
		                        <span>
			                          <a
			                                  class="post__name--underline"
			                                  href=""
			                          >#{post.user.nickname}</a
			                          > #{post.body}
		                          </span>
	                        </div>
	
	                        <span class="post__date-time">Dodano #{post.createdAt}</span>
	                        
	                        <div class="post__likes">
	                   			<span>
	                    			<b class="post__name--underline">#{post.likes.size()}</b> polubień, <b class="post__name--underline">#{post.comments.size()}</b> komentarzy
	                        	</span>
	                        </div>
	                        
	                        <div class="post__buttons">
		                        <button class="post__button">
		                        	<h:graphicImage width="15" library="template" name="icons/heart.png" alt="Polub"/>
		                        </button>
		                        <a class="post__button" href="">
		                            <h:graphicImage width="15" library="template" name="icons/comment.svg" alt="Skomentuj"/>
		                        </a>
	                    </div>
	                    </div>
	                </div>
	                
	                
	            </div>
	    	</ui:repeat>
	    	
	    	<!-- if no posts -->
	    	<h:panelGroup rendered="#{empty posts}">
	    		<p>Brak postów do wyświetlenia.</p>
	    	</h:panelGroup>
	    </div>
    </p:panel>

</html>

